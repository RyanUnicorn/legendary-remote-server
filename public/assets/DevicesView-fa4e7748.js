import{_ as k,r as f,o as u,c as _,i as y,l as S,p as D,a as V,b as t,f as A,m as q,n as ve,q as pe,s as N,v as K,F as z,g as L,t as J,h as E,x as P,d as _e,y as me,z as G,A as be,B as fe,j as H,w as Q,k as g,C as F,T as we,D as ye,u as he,E as $e,e as ge}from"./index-18651ba1.js";import{E as O,D as X}from"./EditableText-1d7a4353.js";import{_ as Ie,B as W}from"./index-15b129e6.js";import{a as I}from"./axios-28bc18a3.js";const Ce=n=>(D("data-v-e3be2320"),n=n(),V(),n),xe={class:"editable-text-inline-wrapper"},Re=Ce(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},[t("path",{d:"M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"})],-1)),ke=[Re],Se={__name:"EditableTextInline",props:{text:String},emits:["rename"],setup(n,{emit:w}){const d=w,o=f(!1);function e(s,a){s&&d("rename",a),o.value=!1}return(s,a)=>(u(),_("div",xe,[y(O,{editing:o.value,text:n.text,adaptiveWidth:!0,onFinish:e},null,8,["editing","text"]),o.value?S("",!0):(u(),_("button",{key:0,class:"icon-btn",onClick:a[0]||(a[0]=i=>o.value=!0)},ke))]))}},j=k(Se,[["__scopeId","data-v-e3be2320"]]);const B={__name:"CheckBox",props:{modelValue:Boolean},emits:["update:modelValue"],setup(n,{emit:w}){const d=n,o=w,e=f(d.modelValue||!1);function s(){e.value=!e.value,o("update:modelValue",e.value)}return A(()=>{q(()=>{e.value=d.modelValue})}),(a,i)=>(u(),_("button",{onClick:s,class:ve(["checkbox",{"checkbox-checked":e.value}])},null,2))}};const Y=n=>(D("data-v-e7c21335"),n=n(),V(),n),De={class:"neu-box device-name-wrapper"},Ve={class:"form-wrapper"},Ee={class:"form-input-wrapper"},Ne=Y(()=>t("span",null,"Use Board",-1)),Me=["value"],Be={class:"form-input-wrapper"},Ue=Y(()=>t("span",null,"Enable Update",-1)),Pe={__name:"DeviceName",props:{deviceInfo:Object,boardList:Array},emits:["updateDeviceInfo","deleteDevice"],setup(n,{emit:w}){const d=n,o=w,e=f(d.deviceInfo.boardId),s=f(d.deviceInfo.enableUpdate),a=f(d.deviceInfo.name);pe([()=>{var v;return(v=d.deviceInfo)==null?void 0:v.boardId},()=>{var v;return(v=d.deviceInfo)==null?void 0:v.enableUpdate},()=>{var v;return(v=d.deviceInfo)==null?void 0:v.name}],([v,b,C])=>{e.value=v,s.value=b,a.value=C});function i(v){o("updateDeviceInfo",{name:v})}function c(v){o("updateDeviceInfo",{boardId:v})}function l(v){o("updateDeviceInfo",{enableUpdate:v})}function p(){confirm(`Are you sure you want to delete the whole device?
This CANNOT be undo!`)&&o("deleteDevice")}return(v,b)=>(u(),_("div",De,[y(j,{class:"device-name",text:n.deviceInfo.name,onRename:i},null,8,["text"]),t("button",{class:"delete-btn neu-box",onClick:p}," DELETE "),t("div",Ve,[t("div",Ee,[Ne,N(t("select",{class:"deivce-name-board-select","onUpdate:modelValue":b[0]||(b[0]=C=>e.value=C),onChange:b[1]||(b[1]=C=>c(C.target.value))},[(u(!0),_(z,null,L(n.boardList,C=>(u(),_("option",{key:C.id,value:C.id},J(C.name),9,Me))),128))],544),[[K,e.value]])]),t("div",Be,[Ue,y(B,{class:"form-check-box",modelValue:s.value,"onUpdate:modelValue":[b[2]||(b[2]=C=>s.value=C),l]},null,8,["modelValue"])])])]))}},ze=k(Pe,[["__scopeId","data-v-e7c21335"]]);const Oe={class:"neu-box entity-card"},Le={__name:"EntityCard",props:{entityInfo:Object},emits:["renameEntity","deleteEntity"],setup(n,{emit:w}){const d=n,o=w,e=["Rename","Delete"],s=f(!1);function a(l){switch(l){case"Rename":s.value=!0;break;case"Delete":confirm(`Are you sure you want to delete this entity?
This CANNOT be undo!`)&&o("deleteEntity",d.entityInfo.id);break}}function i(l,p){l&&o("renameEntity",d.entityInfo.id,p),s.value=!1}function c(){return d.entityInfo.type.charAt(0).toUpperCase()+d.entityInfo.type.slice(1)}return(l,p)=>(u(),_("div",Oe,[y(O,{class:"entity-card-name",text:n.entityInfo.name,editing:s.value,"adaptive-width":!0,onFinish:i},null,8,["text","editing"]),t("span",null,J(c()),1),y(X,{class:"entity-dropdown",options:e,onSelected:a})]))}},Te=k(Le,[["__scopeId","data-v-2b685ac9"]]);const Z=n=>(D("data-v-e7e442d0"),n=n(),V(),n),Fe={class:"entity-list-wrapper"},Ae=Z(()=>t("h2",null,"Entities",-1)),je={class:"device-entities"},He={class:"w-6 h-6 text-gray-800 dark:text-white",style:{padding:"1.4rem"},"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18"},We=Z(()=>t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 1v16M1 9h16"},null,-1)),qe=[We],Ke={__name:"List",props:{entities:Array},emits:["newEntity","renameEntity","deleteEntity"],setup(n,{emit:w}){return(d,o)=>(u(),_("div",Fe,[Ae,t("div",je,[(u(!0),_(z,null,L(n.entities,e=>(u(),E(Te,{key:e.id,"entity-info":e,onRenameEntity:o[0]||(o[0]=(s,a)=>d.$emit("renameEntity",s,a)),onDeleteEntity:o[1]||(o[1]=s=>d.$emit("deleteEntity",s))},null,8,["entity-info"]))),128)),t("a",{class:"neu-box entity-new-btn",onClick:o[2]||(o[2]=e=>d.$emit("newEntity"))},[(u(),_("svg",He,qe))])])]))}},Je=k(Ke,[["__scopeId","data-v-e7e442d0"]]);const T=n=>(D("data-v-404378b2"),n=n(),V(),n),Ge={class:"new-number-wrapper"},Qe={class:"new-number-form-element"},Xe=T(()=>t("label",null,"Is Slider",-1)),Ye={class:"new-number-form-element"},Ze=T(()=>t("label",null,"Step",-1)),et={class:"new-number-form-element"},tt=T(()=>t("label",null,"Min Number",-1)),nt=["max"],ot={class:"new-number-form-element"},at=T(()=>t("label",null,"Max Number",-1)),st=["min"],lt={__name:"NumberSetting",props:{modelValue:Object},emits:["update:modelValue"],setup(n,{emit:w}){const d=n,o=w,e=f(d.modelValue);function s(){o("update:modelValue",e.value)}return(a,i)=>(u(),_("div",Ge,[t("div",Qe,[Xe,y(B,{style:{"font-size":"1.2rem"},"model-value":e.value.isSlider,"onUpdate:modelValue":i[0]||(i[0]=c=>{e.value.isSlider=c,s()})},null,8,["model-value"])]),t("div",Ye,[Ze,N(t("input",{class:"neu-box",type:"number",min:"0",max:"1",step:"0.01","onUpdate:modelValue":i[1]||(i[1]=c=>e.value.step=c),onChange:s},null,544),[[P,e.value.step]])]),t("div",et,[tt,N(t("input",{class:"neu-box",type:"number",min:"0",max:e.value.max,"onUpdate:modelValue":i[2]||(i[2]=c=>e.value.min=c),onChange:s},null,40,nt),[[P,e.value.min]])]),t("div",ot,[at,N(t("input",{class:"neu-box",type:"number",min:e.value.min,"onUpdate:modelValue":i[3]||(i[3]=c=>e.value.max=c),onChange:s},null,40,st),[[P,e.value.max]])])]))}},it=k(lt,[["__scopeId","data-v-404378b2"]]);const ee=n=>(D("data-v-db259fcd"),n=n(),V(),n),dt={class:"new-select"},ct=ee(()=>t("label",{class:"options-title"},"Options",-1)),rt={class:"option-list"},ut={class:"option-list-element"},vt=["onClick"],pt=ee(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"0.8em",viewBox:"0 0 448 512"},[t("path",{d:"M135.2 17.7C140.6 6.8 151.7 0 163.8 0H284.2c12.1 0 23.2 6.8 28.6 17.7L320 32h96c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 96 0 81.7 0 64S14.3 32 32 32h96l7.2-14.3zM32 128H416V448c0 35.3-28.7 64-64 64H96c-35.3 0-64-28.7-64-64V128zm96 64c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16V432c0 8.8 7.2 16 16 16s16-7.2 16-16V208c0-8.8-7.2-16-16-16z"})],-1)),_t=[pt],mt={__name:"SelectSetting",props:{modelValue:Object},emits:["update:modelValue"],setup(n,{emit:w}){const o=f(n.modelValue);function e(s){o.value.options.length>1?o.value.options.splice(s,1):alert("At least one option is needed!")}return(s,a)=>(u(),_("div",dt,[ct,t("div",rt,[(u(!0),_(z,null,L(o.value.options,(i,c)=>(u(),_("div",ut,[y(j,{text:i,onRename:l=>o.value.options[c]=l},null,8,["text","onRename"]),t("a",{class:"delete-option-btn",onClick:l=>e(c)},_t,8,vt)]))),256))]),t("button",{class:"neu-box option-create-btn",onClick:a[0]||(a[0]=i=>o.value.options.push(`option${o.value.options.length+1}`))}," NEW OPTION ")]))}},bt=k(mt,[["__scopeId","data-v-db259fcd"]]);const ft={class:"new-fan-wrapper"},wt={class:"new-fan-form-element"},yt=t("label",null,"Enable Direction",-1),ht={class:"new-fan-form-element"},$t=t("label",null,"Enable Oscillation",-1),gt={class:"new-fan-form-element"},It=t("label",null,"Enable Percentage",-1),Ct={class:"new-fan-form-element"},xt=t("label",null,"Enable PresetMode",-1),Rt={key:0,class:"new-fan-form-element"},kt=t("label",null,"Speed Range Max",-1),St={key:1,class:"new-fan-form-element"},Dt=t("label",null,"Preset Modes (separated by comma)",-1),Vt=["value"],Et={__name:"FanSetting",props:{modelValue:Object},emits:["update:modelValue"],setup(n,{emit:w}){const d=n,o=w,e=f(d.modelValue);function s(){o("update:modelValue",e.value)}const a=_e(()=>e.value.presetModes.join(","));function i(c){c==""?e.value.presetModes=["Normal"]:(e.value.presetModes=c.split(","),e.value.presetModes.filter(l=>l!="")),s()}return(c,l)=>(u(),_("div",ft,[t("div",wt,[yt,y(B,{style:{"font-size":"1.2rem"},"model-value":e.value.enableDirection,"onUpdate:modelValue":l[0]||(l[0]=p=>{e.value.enableDirection=p,s()})},null,8,["model-value"])]),t("div",ht,[$t,y(B,{style:{"font-size":"1.2rem"},"model-value":e.value.enableOscillation,"onUpdate:modelValue":l[1]||(l[1]=p=>{e.value.enableOscillation=p,s()})},null,8,["model-value"])]),t("div",gt,[It,y(B,{style:{"font-size":"1.2rem"},"model-value":e.value.enablePercentage,"onUpdate:modelValue":l[2]||(l[2]=p=>{e.value.enablePercentage=p,s()})},null,8,["model-value"])]),t("div",Ct,[xt,y(B,{style:{"font-size":"1.2rem"},"model-value":e.value.enablePresetMode,"onUpdate:modelValue":l[3]||(l[3]=p=>{e.value.enablePresetMode=p,s()})},null,8,["model-value"])]),e.value.enablePercentage?(u(),_("div",Rt,[kt,N(t("input",{type:"number",class:"neu-box","onUpdate:modelValue":l[4]||(l[4]=p=>e.value.speedRangeMax=p),onChange:l[5]||(l[5]=p=>{e.value.speedRangeMax=p.target.value,s()})},null,544),[[P,e.value.speedRangeMax]])])):S("",!0),e.value.enablePresetMode?(u(),_("div",St,[Dt,t("input",{type:"text",class:"neu-box",value:a.value,onChange:l[6]||(l[6]=p=>i(p.target.value))},null,40,Vt)])):S("",!0)]))}};const te=n=>(D("data-v-611545c2"),n=n(),V(),n),Nt={class:"new-entity-wrapper"},Mt={class:"new-entity"},Bt={class:"entity-title-wrapper"},Ut={class:"entity-type-wrapper"},Pt=te(()=>t("label",null,"Entity Type",-1)),zt=me('<option value="switch" data-v-611545c2>Switch</option><option value="number" data-v-611545c2>Number</option><option value="select" data-v-611545c2>Select</option><option value="button" data-v-611545c2>Button</option><option value="fan" data-v-611545c2>Fan</option>',5),Ot=[zt],Lt={class:"entity-setting-wrapper"},Tt=te(()=>t("h2",null,"Additional Settings",-1)),Ft={key:3,style:{display:"flex","justify-content":"center",color:"var(--color-text-mute)","font-size":"2rem","padding-top":"5rem"}},At={__name:"NewEntity",emits:["cancel","newNumber","newSelect","newButton","newSwitch","newFan"],setup(n,{emit:w}){const d=w,o=f("switch"),e=f("New Entity"),s=f({isSlider:!0,min:1,max:100,step:1}),a=f({options:["option1","option2","option3"]}),i=f({enableDirection:!1,enableOscillation:!1,enablePercentage:!1,enablePresetMode:!1,speedRangeMax:100,presetModes:["Normal","Eco","Turbo"]});function c(){d("newNumber",e.value,s.value)}function l(){d("newSelect",e.value,a.value)}function p(){d("newButton",e.value)}function v(){d("newSwitch",e.value)}function b(){const $={enableDirection:i.value.enableDirection,enableOscillation:i.value.enableOscillation,enablePercentage:i.value.enablePercentage,enablePresetMode:i.value.enablePresetMode};i.value.enablePercentage&&($.speedRangeMax=i.value.speedRangeMax),i.value.enablePresetMode&&($.presetModes=i.value.presetModes),d("newFan",e.value,$)}function C(){switch(o.value){case"number":c();break;case"select":l();break;case"button":p();break;case"switch":v();break;case"fan":b();break}}return($,h)=>(u(),_("div",Nt,[t("a",{onClick:h[0]||(h[0]=R=>$.$emit("cancel"))},"< Back"),t("div",Mt,[t("div",Bt,[t("div",null,[y(j,{class:"form-element form-entity-name",text:e.value,onRename:h[1]||(h[1]=R=>e.value=R)},null,8,["text"])]),t("div",Ut,[Pt,N(t("select",{"onUpdate:modelValue":h[2]||(h[2]=R=>o.value=R)},Ot,512),[[K,o.value]])])]),t("div",Lt,[Tt,o.value=="number"?(u(),E(it,{key:0,modelValue:s.value,"onUpdate:modelValue":h[3]||(h[3]=R=>s.value=R)},null,8,["modelValue"])):S("",!0),o.value=="select"?(u(),E(bt,{key:1,modelValue:a.value,"onUpdate:modelValue":h[4]||(h[4]=R=>a.value=R)},null,8,["modelValue"])):S("",!0),o.value=="fan"?(u(),E(Et,{key:2,modelValue:i.value,"onUpdate:modelValue":h[5]||(h[5]=R=>i.value=R)},null,8,["modelValue"])):S("",!0),o.value=="switch"||o.value=="button"?(u(),_("div",Ft," NONE ")):S("",!0)]),t("button",{class:"neu-box entity-create-btn",onClick:C}," CREATE ")])]))}},jt=k(At,[["__scopeId","data-v-611545c2"]]),Ht={class:"neu-box"},Wt={__name:"DeviceEntities",props:{entities:Array},emits:["renameEntity","deleteEntity","newNumber","newSelect","newButton","newSwitch","newFan"],setup(n,{emit:w}){const d=f(!0);function o(){d.value=!1}function e(){d.value=!0}return(s,a)=>(u(),_("div",Ht,[d.value?(u(),E(Je,{key:0,entities:n.entities,onNewEntity:o,onRenameEntity:a[0]||(a[0]=(i,c)=>s.$emit("renameEntity",i,c)),onDeleteEntity:a[1]||(a[1]=i=>s.$emit("deleteEntity",i))},null,8,["entities"])):S("",!0),d.value?S("",!0):(u(),E(jt,{key:1,onCancel:e,onNewNumber:a[2]||(a[2]=(i,c)=>{s.$emit("newNumber",i,c),d.value=!0}),onNewSelect:a[3]||(a[3]=(i,c)=>{s.$emit("newSelect",i,c),d.value=!0}),onNewButton:a[4]||(a[4]=i=>{s.$emit("newButton",i),d.value=!0}),onNewSwitch:a[5]||(a[5]=i=>{s.$emit("newSwitch",i),d.value=!0}),onNewFan:a[6]||(a[6]=(i,c)=>{s.$emit("newFan",i,c),d.value=!0})}))]))}};const ne=n=>(D("data-v-f7101cf1"),n=n(),V(),n),qt={class:"neu-box blocklyWrapper"},Kt=ne(()=>t("h3",null,"Blockly Code",-1)),Jt=ne(()=>t("div",{class:"neu-box editButton"}," EDIT ",-1)),Gt={class:"blockly"},Qt={__name:"DeviceBlocklyCode",setup(n){const d=G().params.id,o=f([]),e=f(null),s=be();async function a(){try{const l=await I.get(`${g.$origin}/api/devices/${d}`);o.value=l.data}catch(l){console.error(l)}}function i(){const l=o.value.blocklyWorkspace,p=JSON.parse(l);W.serialization.workspaces.load(p,s.value)}const c=()=>{s.value=W.inject(e.value,{readOnly:!0});const l=s.value.getParentSvg();l&&(l.style.backgroundColor="var(--color-background)",l.style.borderRadius="var(--border-radius)",l.style.boxShadow="inset 5px 5px 16px #bebebe, inset -5px -5px 16px #ffffff")};return A(async()=>{await a(),c(),i()}),(l,p)=>{const v=fe("RouterLink");return u(),_(z,null,[y(Ie,{deviceId:H(d)},null,8,["deviceId"]),t("div",qt,[Kt,y(v,{to:`/blockly/${H(d)}`},{default:Q(()=>[Jt]),_:1},8,["to"]),t("div",Gt,[t("div",{ref_key:"blocklyDiv",ref:e,class:"blockly-area"},null,512)])])],64)}}},Xt=k(Qt,[["__scopeId","data-v-f7101cf1"]]);const Yt={},Zt=n=>(D("data-v-47ba1042"),n=n(),V(),n),en={class:"neu-box IRCodeAddingCard"},tn={class:"w-6 h-6 text-gray-800 dark:text-white",style:{padding:"1.4rem"},"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18"},nn=Zt(()=>t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 1v16M1 9h16"},null,-1)),on=[nn];function an(n,w){return u(),_("div",en,[(u(),_("svg",tn,on))])}const sn=k(Yt,[["render",an],["__scopeId","data-v-47ba1042"]]);const M=n=>(D("data-v-894c2eb3"),n=n(),V(),n),ln={key:0,class:"modal"},dn={class:"modal-content"},cn=M(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 512 512"},[t("path",{d:"M192 32c0-17.7 14.3-32 32-32C383.1 0 512 128.9 512 288c0 17.7-14.3 32-32 32s-32-14.3-32-32C448 164.3 347.7 64 224 64c-17.7 0-32-14.3-32-32zM60.6 220.6L164.7 324.7l28.4-28.4c-.7-2.6-1.1-5.4-1.1-8.3c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32c-2.9 0-5.6-.4-8.3-1.1l-28.4 28.4L291.4 451.4c14.5 14.5 11.8 38.8-7.3 46.3C260.5 506.9 234.9 512 208 512C93.1 512 0 418.9 0 304c0-26.9 5.1-52.5 14.4-76.1c7.5-19 31.8-21.8 46.3-7.3zM224 96c106 0 192 86 192 192c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-70.7-57.3-128-128-128c-17.7 0-32-14.3-32-32s14.3-32 32-32z"})],-1)),rn={key:2,class:"receivePage"},un={xmlns:"http://www.w3.org/2000/svg",height:"10em",style:{fill:"var(--color-accent)"},viewBox:"0 0 448 512"},vn=M(()=>t("path",{d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},null,-1)),pn=[vn],_n=M(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 384 512"},[t("path",{d:"M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"})],-1)),mn=M(()=>t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"1em",viewBox:"0 0 448 512"},[t("path",{d:"M48 96V416c0 8.8 7.2 16 16 16H384c8.8 0 16-7.2 16-16V170.5c0-4.2-1.7-8.3-4.7-11.3l33.9-33.9c12 12 18.7 28.3 18.7 45.3V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96C0 60.7 28.7 32 64 32H309.5c17 0 33.3 6.7 45.3 18.7l74.5 74.5-33.9 33.9L320.8 84.7c-.3-.3-.5-.5-.8-.8V184c0 13.3-10.7 24-24 24H104c-13.3 0-24-10.7-24-24V80H64c-8.8 0-16 7.2-16 16zm80-16v80H272V80H128zm32 240a64 64 0 1 1 128 0 64 64 0 1 1 -128 0z"})],-1)),bn={key:3,class:"hollow-dots-spinner"},fn=M(()=>t("div",{class:"dot"},null,-1)),wn=M(()=>t("div",{class:"dot"},null,-1)),yn=M(()=>t("div",{class:"dot"},null,-1)),hn=[fn,wn,yn],$n={__name:"IRCodePopUp",props:["isModalOpen","boardId"],emits:["close","saveIRCode"],setup(n,{emit:w}){const d=n,o=()=>{c.value?c.value=!1:(i.value=!0,c.value=!1,s.value=[],a.value="",e("close"))},e=w,s=f([]),a=f([]),i=f(!0),c=f(!1);async function l(){i.value=!i.value;try{const b=await I.get(`${g.$origin}/api/ircodes/record/${d.boardId}`);a.value=b.data.code,s.value=b.data.rawData,c.value=!c.value}catch(b){console.error(b)}i.value=!i.value}async function p(){try{await I.put(`${g.$origin}/api/ircodes/send`,{code:a.value,rawData:s.value,boardId:d.boardId})}catch(b){console.error(b)}}function v(){e("saveIRCode",d.boardId,s.value,a.value),i.value=!0,c.value=!1,s.value=[],a.value="",e("close")}return(b,C)=>(u(),_("div",null,[(u(),E(ye,{to:"body"},[y(we,{name:"modal-fade"},{default:Q(()=>[n.isModalOpen?(u(),_("div",ln,[t("div",dn,[i.value?(u(),_("span",{key:0,onClick:o,class:"back-btn"},"< Back")):S("",!0),i.value&&!c.value?(u(),_("div",{key:1,onClick:l,class:"neu-box record-btn"},[cn,F(" Record ")])):c.value?(u(),_("div",rn,[(u(),_("svg",un,pn)),t("div",{onClick:p,class:"neu-box replay-btn"},[_n,F(" Replay ")]),t("div",{onClick:v,class:"neu-box save-btn"},[mn,F(" Save ")])])):(u(),_("div",bn,hn))])])):S("",!0)]),_:1})]))]))}},oe=k($n,[["__scopeId","data-v-894c2eb3"]]);const gn={class:"neu-box IRCodesInfoCard"},In={__name:"IRCodesInfoCard",props:["IRCodedata","boardId"],emits:["rename","redescribe","delete","saveInfoIRCode"],setup(n,{emit:w}){he($=>({"6e239161":$.color}));const d=["Rename","Redescribe","Record","Delete"],o=n,e=w,s=f(!1),a=f(!1);function i($){switch($){case"Rename":s.value=!0;break;case"Redescribe":a.value=!0;break;case"Delete":e("delete",o.IRCodedata.id);break;case"Record":b();break}}async function c(){try{await I.put(`${g.$origin}/api/ircodes/send`,{code:o.IRCodedata.code,rawData:o.IRCodedata.rawData,boardId:o.boardId})}catch($){console.error($)}}function l($,h){$&&e("rename",o.IRCodedata.id,h),s.value=!1}function p($,h){$&&e("redescribe",o.IRCodedata.id,h),a.value=!1}const v=f(!1);function b(){v.value=!v.value}function C($,h,R){e("saveInfoIRCode",$,h,R,o.IRCodedata.id,o.IRCodedata.deviceId)}return($,h)=>(u(),_("div",gn,[a.value||s.value?S("",!0):(u(),_("div",{key:0,onClick:c,class:"sendIR"})),y(X,{class:"card-dropdown",options:d,onSelected:i}),y(O,{text:o.IRCodedata.name,editing:s.value,onFinish:l},null,8,["text","editing"]),y(O,{"adaptive-width":!0,text:o.IRCodedata.description,editing:a.value,onFinish:p,class:"description"},null,8,["text","editing"]),y(oe,{isModalOpen:v.value,boardId:o.boardId,onClose:b,onSaveIRCode:C},null,8,["isModalOpen","boardId"])]))}},Cn=k(In,[["__scopeId","data-v-35fa2c86"]]);const ae=n=>(D("data-v-920ad644"),n=n(),V(),n),xn={class:"neu-box IRCodeFrame"},Rn=ae(()=>t("h3",null,"IR Code",-1)),kn={class:"intervalBlock"},Sn=ae(()=>t("h2",null,"Interval",-1)),Dn={class:"container"},Vn={__name:"DeviceIRCodes",props:["IRCodes","boardId","irSendInterval"],emits:["rename","redescribe","delete","saveNewIRCode","saveInfoIRCode","irSendIntervalChange"],setup(n,{emit:w}){const d=n,o=f(!1),e=f(""),s=f(null);q(()=>{e.value=d.irSendInterval});function a(){o.value=!o.value}function i(){a()}return(c,l)=>(u(),_("div",xn,[Rn,t("div",kn,[Sn,N(t("input",{"onUpdate:modelValue":l[0]||(l[0]=p=>e.value=p),ref_key:"inputElement",ref:s,class:"neu-box interval-input",type:"text",onKeyup:l[1]||(l[1]=$e(p=>s.value.blur(),["enter"])),onBlur:l[2]||(l[2]=p=>c.$emit("irSendIntervalChange",e.value))},null,544),[[P,e.value]])]),t("div",Dn,[(u(!0),_(z,null,L(n.IRCodes,p=>(u(),E(Cn,{key:n.IRCodes.id,IRCodedata:p,boardId:n.boardId,onRename:l[3]||(l[3]=(v,b)=>c.$emit("rename",v,b)),onRedescribe:l[4]||(l[4]=(v,b)=>c.$emit("redescribe",v,b)),onDelete:l[5]||(l[5]=v=>c.$emit("delete",v)),onSaveInfoIRCode:l[6]||(l[6]=(v,b,C,$,h)=>c.$emit("saveInfoIRCode",v,b,C,$,h))},null,8,["IRCodedata","boardId"]))),128)),y(sn,{onClick:i}),y(oe,{isModalOpen:o.value,boardId:n.boardId,onClose:a,onSaveIRCode:l[7]||(l[7]=(p,v,b)=>c.$emit("saveNewIRCode",p,v,b))},null,8,["isModalOpen","boardId"])])]))}},En=k(Vn,[["__scopeId","data-v-920ad644"]]);const Nn={class:"deviceview-grid"},Mn={class:"left"},Bn={class:"right"},Un={__name:"DevicesView",setup(n){const w=G(),d=ge(),o=w.params.id,e=f({}),s=f([]);async function a(){try{const r=await I.get(`${g.$origin}/api/devices/${o}`);e.value=r.data}catch(r){console.error(r)}}async function i(){try{let r=await I.get(`${g.$origin}/api/boards`);s.value=r.data}catch(r){console.error(r)}}async function c(r){if(e.value.irSendInterval!=r)try{await I.put(`${g.$origin}/api/devices/${o}`,{irSendInterval:r})}catch(m){console.error(m)}a()}async function l(r,m,x){try{await I.post(`${g.$origin}/api/ircodes`,{deviceId:o,name:"New IRCode",description:"New Description",code:x,rawData:m})}catch(U){console.error(U)}a()}async function p(r,m,x,U,Pn){try{await I.put(`${g.$origin}/api/ircodes/${U}`,{code:x,rawData:m})}catch(ue){console.error(ue)}a()}async function v(r,m){try{await I.put(`${g.$origin}/api/ircodes/${r}`,{name:m})}catch(x){console.error(x)}a()}async function b(r,m){try{await I.put(`${g.$origin}/api/ircodes/${r}`,{description:m})}catch(x){console.error(x)}a()}async function C(r){try{await I.delete(`${g.$origin}/api/ircodes/${r}`)}catch(m){console.error(m)}window.location.reload()}async function $(r){console.log("updating device with body",r);try{await I.put(`${g.$origin}/api/devices/${o}`,r)}catch(m){console.error(m)}a()}async function h(){console.log("deleting device");try{await I.delete(`${g.$origin}/api/devices/${o}`,e),d.push({path:"/overview",replace:!0})}catch(r){console.error(r)}}async function R(r,m){console.log("renaming entity",r,m);try{await I.put(`${g.$origin}/api/entities/${r}`,{name:m})}catch(x){console.error(x)}a()}async function se(r){console.log("deleting entity",r);try{await I.delete(`${g.$origin}/api/entities/${r}`)}catch(m){console.error(m)}window.location.reload()}async function le(r,m){console.log("new number",r,m);try{await I.post(`${g.$origin}/api/entities`,{deviceId:o,name:r,type:"number",number:{...m,state:m.min}})}catch(x){console.error(x)}a()}async function ie(r,m){console.log("new select",r,m);try{await I.post(`${g.$origin}/api/entities`,{deviceId:o,name:r,type:"select",select:{...m,state:m.options[0]}})}catch(x){console.error(x)}a()}async function de(r){console.log("new button",r);try{await I.post(`${g.$origin}/api/entities`,{deviceId:o,name:r,type:"button",button:{}})}catch(m){console.error(m)}a()}async function ce(r){console.log("new switch",r);try{await I.post(`${g.$origin}/api/entities`,{deviceId:o,name:r,type:"switch",switch:{state:!1}})}catch(m){console.error(m)}a()}async function re(r,m){console.log("new fan",r,m);const x={deviceId:o,name:r,type:"fan",fan:{...m}};x.fan.enablePresetMode&&(x.fan.presetModeState=x.fan.presetModes[0]);try{await I.post(`${g.$origin}/api/entities`,x)}catch(U){console.error(U)}a()}return A(()=>{a(),i()}),(r,m)=>(u(),_("div",Nn,[t("div",Mn,[y(ze,{"device-info":e.value,"board-list":s.value,onUpdateDeviceInfo:$,onDeleteDevice:h},null,8,["device-info","board-list"]),y(Wt,{entities:e.value.entities,onRenameEntity:R,onDeleteEntity:se,onNewNumber:le,onNewSelect:ie,onNewButton:de,onNewSwitch:ce,onNewFan:re},null,8,["entities"])]),t("div",Bn,[y(Xt),y(En,{IRCodes:e.value.irCodes,boardId:e.value.boardId,irSendInterval:e.value.irSendInterval,onRename:v,onRedescribe:b,onDelete:C,onSaveInfoIRCode:p,onSaveNewIRCode:l,onIrSendIntervalChange:c},null,8,["IRCodes","boardId","irSendInterval"])])]))}},Fn=k(Un,[["__scopeId","data-v-e6bc47dc"]]);export{Fn as default};
