import{_ as u,o as c,c as _,p as w,a as $,b as i,u as A,d as k,t as m,e as U,r as y,f as O,F as x,g as D,h as B,w as P,i as p,j as S,R,k as b,n as N}from"./index-35bf6fef.js";import{a as h}from"./axios-28bc18a3.js";import{D as E,E as V}from"./EditableText-e61592b9.js";const j={},M=e=>(w("data-v-5864b60a"),e=e(),$(),e),F={class:"neu-box overviewDevicesAddingCard"},L={class:"w-6 h-6 text-gray-800 dark:text-white",style:{padding:"1.4rem"},"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18"},z=M(()=>i("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 1v16M1 9h16"},null,-1)),T=[z];function q(e,s){return c(),_("div",F,[(c(),_("svg",L,T))])}const G=u(j,[["render",q],["__scopeId","data-v-5864b60a"]]);const H={class:"neu-box overviewDevicesInfoCard"},J={class:"rectangle"},K={__name:"OverviewDevicesInfoCard",props:["deviceId","deviceName","entities","enableUpdate"],setup(e){A(r=>({b76aefca:n.value,"25306e58":a.value}));const s=e,n=k(()=>s.enableUpdate?"var(--color-accent)":"var(--color-text)"),a=k(()=>s.enableUpdate?"var(--color-accent-mute)":"var(--color-background-mute)");return(r,t)=>(c(),_("div",H,[i("h1",null,m(s.deviceName),1),i("h2",null,m(s.entities)+" "+m(s.entities<=1?" entity":" entities"),1),i("div",J,m(s.enableUpdate==!0?"Enabled":"Disabled"),1)]))}},Q=u(K,[["__scopeId","data-v-a4b32d95"]]);const W=e=>(w("data-v-3a1611d0"),e=e(),$(),e),X={class:"neu-box frame"},Y=W(()=>i("h3",null,"Devices",-1)),Z={class:"container"},ee={__name:"OverviewDevices",setup(e){const s=U(),n=y([]);async function a(){try{const t=await h.get(`${b.$origin}/api/devices`);n.value=t.data}catch(t){console.error(t)}}async function r(){try{const t=await h.post(`${b.$origin}/api/devices`,{name:"New Device"});s.push(`/devices/${t.data.id}`)}catch(t){console.error(t)}}return O(()=>{a()}),(t,f)=>(c(),_("div",X,[Y,i("div",Z,[(c(!0),_(x,null,D(n.value,v=>(c(),B(S(R),{key:v.id,to:`/devices/${v.id}`},{default:P(()=>[p(Q,{deviceName:v.name,entities:v.entities.length,enableUpdate:v.enableUpdate},null,8,["deviceName","entities","enableUpdate"])]),_:2},1032,["to"]))),128)),p(G,{onClick:r})])]))}},ae=u(ee,[["__scopeId","data-v-3a1611d0"]]);const te={class:"paired-board-card neu-box"},se={__name:"PairedBoardCard",props:["boardData"],emits:["unpair","rename"],setup(e,{emit:s}){const n=["Rename","Unpair"],a=e,r=s,t=y(!1);function f(o){var d;switch(o){case"Rename":t.value=!0;break;case"Unpair":r("unpair",(d=a.boardData)==null?void 0:d.id);break}}function v(o,d){var l;o&&r("rename",(l=a.boardData)==null?void 0:l.id,d),t.value=!1}return(o,d)=>{var l,g,I,C;return c(),_("div",te,[p(E,{class:"card-dropdown",options:n,onSelected:f}),p(V,{text:(l=e.boardData)==null?void 0:l.name,editing:t.value,onFinish:v},null,8,["text","editing"]),i("h1",null,m((g=e.boardData)==null?void 0:g.id.match(/.{1,2}/g).join(":")),1),i("p",{class:N({offline:!((I=e.boardData)!=null&&I.isAvailable)})},m((C=e.boardData)!=null&&C.isAvailable?"Online":"Offline"),3)])}}},re=u(se,[["__scopeId","data-v-acc05cf8"]]);const oe=e=>(w("data-v-5323923e"),e=e(),$(),e),ne={class:"paried-boards-wrapper"},ie=oe(()=>i("h2",null,"Boards",-1)),de={class:"board-card-wrapper"},ce={__name:"PairedBoards",props:["boards"],emits:["unpair","rename"],setup(e,{emit:s}){return(n,a)=>(c(),_("div",ne,[ie,i("div",de,[(c(!0),_(x,null,D(e.boards,r=>(c(),B(re,{key:r.id,"board-data":r,onUnpair:a[0]||(a[0]=t=>n.$emit("unpair",t)),onRename:a[1]||(a[1]=(t,f)=>n.$emit("rename",t,f))},null,8,["board-data"]))),128))])]))}},_e=u(ce,[["__scopeId","data-v-5323923e"]]);const le=e=>(w("data-v-cf6ea3ca"),e=e(),$(),e),ve={class:"available-board-card neu-box"},ue=le(()=>i("p",null,"Online",-1)),pe={__name:"AvailableBoardCard",props:["boardData"],emits:["pair"],setup(e,{emit:s}){return(n,a)=>{var r;return c(),_("div",ve,[i("h1",null,m((r=e.boardData)==null?void 0:r.id.match(/.{1,2}/g).join(":")),1),ue,i("button",{class:"neu-box pair-btn",onClick:a[0]||(a[0]=t=>n.$emit("pair",e.boardData.id))}," PAIR ")])}}},be=u(pe,[["__scopeId","data-v-cf6ea3ca"]]);const he=e=>(w("data-v-13b787de"),e=e(),$(),e),me={class:"available-boards-wrapper"},fe={class:"board-card-wrapper"},we=he(()=>i("h2",null,"Available Boards",-1)),$e={__name:"AvailableBoards",props:["boards"],emits:["pair"],setup(e,{emit:s}){return(n,a)=>(c(),_("div",me,[i("div",fe,[(c(!0),_(x,null,D(e.boards,r=>(c(),B(be,{key:r.id,"board-data":r,onPair:a[0]||(a[0]=t=>n.$emit("pair",t))},null,8,["board-data"]))),128))]),we]))}},ge=u($e,[["__scopeId","data-v-13b787de"]]);const ye={class:"paired-board-grid"},xe={class:"neu-box"},De={class:"neu-box"},Be={__name:"OverviewBoards",setup(e){const s=y([]),n=y([]);async function a(){try{let o=await h.get(`${b.$origin}/api/boards`);s.value=o.data}catch(o){console.error(o)}}async function r(){try{let d=(await h.get(`${b.$origin}/api/boards/discover`)).data.filter(l=>l.isAvailable);s.value.forEach(l=>{d=d.filter(g=>g.id!=l.id)}),n.value=d}catch(o){console.error(o)}}async function t(o){try{await h.post(`${b.$origin}/api/boards`,{id:o,name:"New Board"})}catch(d){console.error(d)}await a(),await r()}async function f(o,d){try{await h.put(`${b.$origin}/api/boards/${o}`,{name:d})}catch(l){console.error(l)}a()}async function v(o){try{await h.delete(`${b.$origin}/api/boards/${o}`)}catch(d){console.error(d)}await a(),await r()}return O(async()=>{await a(),await r()}),(o,d)=>(c(),_("div",ye,[i("div",xe,[p(_e,{boards:s.value,onRename:f,onUnpair:v},null,8,["boards"])]),i("div",De,[p(ge,{boards:n.value,onPair:t},null,8,["boards"])])]))}},Ie=u(Be,[["__scopeId","data-v-98355cfd"]]);const Ce={class:"overview-grid"},ke={__name:"OverviewView",setup(e){return(s,n)=>(c(),_("div",Ce,[p(ae),p(Ie)]))}},Pe=u(ke,[["__scopeId","data-v-0ca14e1b"]]);export{Pe as default};
